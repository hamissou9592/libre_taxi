{"version":3,"sources":["order-test.js"],"names":["args","orderKey","t","pass","o","is","extra","truthy","stateful","key","table","order","init","markNotified","isNotified","falsy"],"mappings":";;weAAA;;;;;;;;;;;;;;;;;;AAkBA;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,4BAAiB,UAAjB,EAA6B,UAACA,IAAD,EAAU;AAAE,sBAAUA,IAAV;AAAkB,CAA3D;;AAEA,mBAAK,4CAAL,EAAmD,aAAK;AACtD,sBAAU,EAAEC,UAAU,sCAAZ,EAAV;AACAC,IAAEC,IAAF;AACD,CAHD;;AAKA,mBAAK,gBAAL,EAAuB,aAAK;AAAA;;AAC1B,MAAMC,IAAI,oBAAU,EAAEH,UAAU,sCAAZ,EAAV,CAAV;AACAC,IAAEG,EAAF,uBAAK,oCAAEJ,QAAP;AAAA;AAAA;AAAA;AAAA,MAAiB,sCAAjB;AACD,CAHD;;AAKA,mBAAK,0CAAL,EAAiD,aAAK;AACpD,sBAAU,EAAEA,UAAU,sCAAZ,EAAoDK,OAAO,GAA3D,EAAV;AACAJ,IAAEC,IAAF;AACD,CAHD;;AAKA,mBAAK,oDAAL,EAA2D,aAAK;AAAA;AAAA;;AAC9D,MAAMC,IAAI,oBAAU,EAAEH,UAAU,sCAAZ,EAAoDK,OAAO,GAA3D,EAAV,CAAV;AACAJ,IAAEG,EAAF,yBAAK,qCAAEJ,QAAP;AAAA;AAAA;AAAA;AAAA,MAAiB,sCAAjB;AACAC,IAAEG,EAAF,yBAAK,qCAAEC,KAAP;AAAA;AAAA;AAAA;AAAA,MAAc,GAAd;AACAJ,IAAEC,IAAF;AACD,CALD;;AAOA,mBAAK,4BAAL,EAAmC,aAAK;AAAA;AAAA;AAAA;;AACtC,MAAMC,IAAI,oBAAU,EAAEH,UAAU,sCAAZ,EAAV,CAAV;AACAC,IAAEK,MAAF,yBAAS,qCAAEC,QAAX;AAAA;AAAA;AAAA;AAAA;AACAN,IAAEG,EAAF,yBAAK,wDAAEG,QAAF,wBAAWC,GAAhB;AAAA;AAAA;AAAA;AAAA,MAAqB,sCAArB;AACAP,IAAEG,EAAF,yBAAK,wDAAEG,QAAF,wBAAWE,KAAhB;AAAA;AAAA;AAAA;AAAA,MAAuB,QAAvB;AACAR,IAAEC,IAAF;AACD,CAND;;AAQA,mBAAK,4DAAL,EAAmE,aAAK;AAAA;AAAA;AAAA;;AACtE,MAAMQ,QAAQ,oBAAU,EAAEV,UAAU,sCAAZ,EAAV,CAAd;AACAU,QAAMC,IAAN;AACAD,QAAME,YAAN,CAAmB,OAAnB;AACAF,QAAME,YAAN,CAAmB,OAAnB;AACAX,IAAEK,MAAF,yBAAS,gDAAMO,UAAN,CAAiB,OAAjB,CAAT;AAAA;AAAA;AAAA;AAAA;AACAZ,IAAEK,MAAF,yBAAS,gDAAMO,UAAN,CAAiB,OAAjB,CAAT;AAAA;AAAA;AAAA;AAAA;AACAZ,IAAEa,KAAF,yBAAQ,gDAAMD,UAAN,CAAiB,OAAjB,CAAR;AAAA;AAAA;AAAA;AAAA;AACD,CARD","file":"order-test.js","sourcesContent":["/*\n    LibreTaxi, free and open source ride sharing platform.\n    Copyright (C) 2016-2017  Roman Pushkin\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as\n    published by the Free Software Foundation, either version 3 of the\n    License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\n/* eslint-disable no-new */\nimport test from 'ava';\nimport Order from '../src/order';\nimport checkNotNullTest from './helpers/check-not-null';\n\ncheckNotNullTest('orderKey', (args) => { new Order(args); });\n\ntest('can be constructed with default parameters', t => {\n  new Order({ orderKey: '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe' });\n  t.pass();\n});\n\ntest('saves orderKey', t => {\n  const o = new Order({ orderKey: '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe' });\n  t.is(o.orderKey, '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe');\n});\n\ntest('can be constructed with extra parameters', t => {\n  new Order({ orderKey: '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe', extra: 555 });\n  t.pass();\n});\n\ntest('order parameters should be accessible from outside', t => {\n  const o = new Order({ orderKey: '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe', extra: 555 });\n  t.is(o.orderKey, '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe');\n  t.is(o.extra, 555);\n  t.pass();\n});\n\ntest('should set stateful params', t => {\n  const o = new Order({ orderKey: '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe' });\n  t.truthy(o.stateful);\n  t.is(o.stateful.key, '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe');\n  t.is(o.stateful.table, 'orders');\n  t.pass();\n});\n\ntest('should add to notified list and check if user was notified', t => {\n  const order = new Order({ orderKey: '07b0f3af-7ed5-45c6-bdfe-f61d05a199fe' });\n  order.init();\n  order.markNotified('cli_1');\n  order.markNotified('cli_2');\n  t.truthy(order.isNotified('cli_1'));\n  t.truthy(order.isNotified('cli_2'));\n  t.falsy(order.isNotified('cli_3'));\n});\n"]}