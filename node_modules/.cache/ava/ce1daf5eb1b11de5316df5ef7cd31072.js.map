{"version":3,"sources":["action-factory-test.js"],"names":["user","state","a1","fromRoute","route","a2","a3","a4","a5","a6","a7","a8","a9","a10","a11","a12","a13","a14","a15","a16","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a29","a30","a31","a32","a33","t","is","type","truthy","fromMenuLocation","cb","err","throws","menuLocation","end","action","i18n","locale","__"],"mappings":"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","file":"action-factory-test.js","sourcesContent":["/*\n    LibreTaxi, free and open source ride sharing platform.\n    Copyright (C) 2016-2017  Roman Pushkin\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as\n    published by the Free Software Foundation, either version 3 of the\n    License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\n/* eslint-disable no-new */\n/* eslint-disable no-unused-vars */\nimport test from 'ava';\nimport ActionFactory from '../src/factories/action-factory';\n\n// update next test cases when you have more routes in `routes.js`\n\ntest('should return routes by route', t => {\n  const user = { state: {} };\n  const a1 = ActionFactory.fromRoute({ route: 'select-locale', user });\n  const a2 = ActionFactory.fromRoute({ route: 'foo', user });\n  const a3 = ActionFactory.fromRoute({ route: 'default', user });\n  const a4 = ActionFactory.fromRoute({ route: 'select-user-type', user });\n  const a5 = ActionFactory.fromRoute({ route: 'request-phone', user });\n  const a6 = ActionFactory.fromRoute({ route: 'passenger-index', user });\n  const a7 = ActionFactory.fromRoute({ route: 'driver-select-vehicle-type', user });\n  const a8 = ActionFactory.fromRoute({ route: 'settings', user });\n  const a9 = ActionFactory.fromRoute({ route: 'passenger-request-location', user });\n  const a10 = ActionFactory.fromRoute({ route: 'passenger-request-destination', user });\n  const a11 = ActionFactory.fromRoute({ route: 'order-submitted', user });\n  const a12 = ActionFactory.fromRoute({ route: 'blank-screen', user });\n  const a13 = ActionFactory.fromRoute({ route: 'order-cancelled', user });\n  const a14 = ActionFactory.fromRoute({ route: 'redirect', user });\n  const a15 = ActionFactory.fromRoute({ route: 'driver-explain-checkins', user });\n  const a16 = ActionFactory.fromRoute({ route: 'driver-request-location', user });\n  const a17 = ActionFactory.fromRoute({ route: 'driver-explain-whats-next', user });\n  const a18 = ActionFactory.fromRoute({ route: 'driver-index', user });\n  const a19 = ActionFactory.fromRoute({ route: 'driver-checkin', user });\n  const a20 = ActionFactory.fromRoute({ route: 'driver-mute', user });\n  const a21 = ActionFactory.fromRoute({ route: 'driver-unmute', user });\n  const a22 = ActionFactory.fromRoute({ route: 'passenger-request-price', user });\n  const a23 = ActionFactory.fromRoute({ route: 'passenger-contact-new-number', user });\n  const a24 = ActionFactory.fromRoute({ route: 'save-and-redirect', user });\n  const a25 = ActionFactory.fromRoute({ route: 'passenger-contact-driver-price', user });\n  const a26 = ActionFactory.fromRoute({ route: 'driver-order-set-price', user });\n  const a27 = ActionFactory.fromRoute({ route: 'passenger-verify-location', user });\n  const a28 = ActionFactory.fromRoute({ route: 'passenger-verify-cash', user });\n  const a29 = ActionFactory.fromRoute({ route: 'driver-request-radius', user });\n  const a30 = ActionFactory.fromRoute({ route: 'show-message', user });\n  const a31 = ActionFactory.fromRoute({ route: 'update-identity', user });\n  const a32 = ActionFactory.fromRoute({ route: 'confirm-locale', user });\n  const a33 = ActionFactory.fromRoute({ route: 'system-reset-user', user });\n\n  t.is(a1.type, 'select-locale');\n  t.is(a2.type, 'foo');\n  t.is(a3.type, 'select-locale');\n  t.is(a4.type, 'select-user-type');\n  t.is(a5.type, 'request-phone');\n  t.is(a6.type, 'passenger-index');\n  t.is(a7.type, 'driver-select-vehicle-type');\n  t.is(a8.type, 'foo');\n  t.is(a9.type, 'passenger-request-location');\n  t.is(a10.type, 'passenger-request-destination');\n  t.is(a11.type, 'order-submitted');\n  t.is(a12.type, 'blank-screen');\n  t.is(a13.type, 'order-cancelled');\n  t.is(a14.type, 'redirect');\n  t.is(a15.type, 'driver-explain-checkins');\n  t.is(a16.type, 'driver-request-location');\n  t.is(a17.type, 'driver-explain-whats-next');\n  t.is(a18.type, 'driver-index');\n  t.is(a19.type, 'driver-checkin');\n  t.is(a20.type, 'driver-mute');\n  t.is(a21.type, 'driver-unmute');\n  t.is(a22.type, 'passenger-request-price');\n  t.is(a23.type, 'passenger-contact-new-number');\n  t.is(a24.type, 'save-and-redirect');\n  t.is(a25.type, 'passenger-contact-driver-price');\n  t.is(a26.type, 'driver-order-set-price');\n  t.is(a27.type, 'passenger-verify-location');\n  t.is(a28.type, 'passenger-verify-cash');\n  t.is(a29.type, 'driver-request-radius');\n  t.is(a30.type, 'show-message');\n  t.is(a31.type, 'update-identity');\n  t.is(a32.type, 'confirm-locale');\n  t.is(a33.type, 'system-reset-user');\n});\n\ntest('should have default route', t => {\n  t.truthy(ActionFactory.fromMenuLocation({ state: {} }));\n});\n\ntest.cb('should fail when route key not found', t => {\n  const err = 'Can\\'t find route key \"foobar\" in routes';\n\n  t.throws(() => {\n    ActionFactory.fromMenuLocation({ state: { menuLocation: 'foobar' } });\n  }, err);\n\n  t.end();\n});\n\ntest('should have i18n object which defaults to en', t => {\n  const action = ActionFactory.fromMenuLocation({ state: {} });\n  t.truthy(action.i18n);\n  t.is(action.i18n.locale, 'en');\n  t.is(action.i18n.__('__locale__'), 'en');\n});\n\ntest('should support en locale', t => {\n  const action = ActionFactory.fromMenuLocation({ state: { locale: 'en' } });\n  t.truthy(action.i18n);\n  t.is(action.i18n.locale, 'en');\n  t.is(action.i18n.__('__locale__'), 'en');\n});\n\ntest('should support ru locale', t => {\n  const action = ActionFactory.fromMenuLocation({ state: { locale: 'ru' } });\n  t.truthy(action.i18n);\n  t.is(action.i18n.locale, 'ru');\n  t.is(action.i18n.__('__locale__'), 'ru');\n});\n\ntest('should provision action with user object', t => {\n  const action = ActionFactory.fromMenuLocation({ state: {} });\n  t.truthy(action.user);\n});\n"]}