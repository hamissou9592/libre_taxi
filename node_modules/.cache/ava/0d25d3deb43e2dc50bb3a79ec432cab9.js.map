{"version":3,"sources":["kue-test.js"],"names":["cb","queue","createQueue","milliseconds","t","plan","process","job","done","is","data","foo","end","create","delay","priority","save"],"mappings":";;weAAA;;;;;;;;;;;;;;;;;;AAkBA;;;;AACA;;;;;;AAEA,cAAKA,EAAL,CAAQ,kDAAR,EAA4D,aAAK;AAC/D,MAAMC,QAAQ,cAAIC,WAAJ,EAAd;AACA,MAAMC,eAAe,GAArB;AACAC,IAAEC,IAAF,CAAO,CAAP;;AAEA;AACAJ,QAAMK,OAAN,CAAc,MAAd,EAAsB,UAACC,GAAD,EAAMC,IAAN,EAAe;AAAA;;AACnCJ,MAAEK,EAAF,uBAAK,wDAAIC,IAAJ,wBAASC,GAAd;AAAA;AAAA;AAAA;AAAA,QAAmB,KAAnB;AACAH;AACAJ,MAAEQ,GAAF;AACD,GAJD;;AAMA;AACAX,QAAMY,MAAN,CAAa,MAAb,EAAqB,EAAEF,KAAK,KAAP,EAArB,EACGG,KADH,CACSX,YADT,EAEGY,QAFH,CAEY,MAFZ,EAGGC,IAHH;AAID,CAjBD","file":"kue-test.js","sourcesContent":["/*\n    LibreTaxi, free and open source ride sharing platform.\n    Copyright (C) 2016-2017  Roman Pushkin\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as\n    published by the Free Software Foundation, either version 3 of the\n    License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport test from 'ava';\nimport kue from 'kue';\n\ntest.cb('should support delayed messages with kue library', t => {\n  const queue = kue.createQueue();\n  const milliseconds = 500;\n  t.plan(1);\n\n  // add handler\n  queue.process('test', (job, done) => {\n    t.is(job.data.foo, 'bar');\n    done();\n    t.end();\n  });\n\n  // then create with delay\n  queue.create('test', { foo: 'bar' })\n    .delay(milliseconds)\n    .priority('high')\n    .save();\n});\n"]}