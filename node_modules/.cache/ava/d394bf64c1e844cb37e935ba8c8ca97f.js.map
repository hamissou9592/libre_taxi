{"version":3,"sources":["paged-options-test.js"],"names":["generateButtons","n","rows","m","push","label","value","r","t","is","type","origin","length","totalPages","falsy","rsOptions","page1","currentPage","page2","page3","x","o","undefined","message","defaultMessage","nextPageNumber"],"mappings":"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","file":"paged-options-test.js","sourcesContent":["/*\n    LibreTaxi, free and open source ride sharing platform.\n    Copyright (C) 2016-2017  Roman Pushkin\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as\n    published by the Free Software Foundation, either version 3 of the\n    License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\n/* eslint-disable no-new, max-len */\nimport test from 'ava';\nimport PagedOptions from '../../../src/responses/decorators/paged-options';\nimport OptionsResponse from '../../../src/responses/options-response';\n\n// generate buttons, 1 button per row\nconst generateButtons = (n) => {\n  const rows = [];\n  for (let m = 1; m <= n; m++) {\n    rows.push([{ label: `Label ${m}`, value: m }]);\n  }\n  return rows;\n};\n\ntest('can be constructed with default parameters', t => {\n  const r = new PagedOptions(\n    1,\n    new OptionsResponse({\n      rows: [[{ label: 'Ok', value: 'ok' }]],\n    }));\n  t.is(r.type, 'options');\n  t.is(r.origin.type, 'options');\n});\n\ntest('should have six buttons for the first page', t => {\n  const r = new PagedOptions(\n    1,\n    new OptionsResponse({\n      rows: generateButtons(6),\n    }));\n  t.is(r.rows.length, 3);\n  t.is(r.rows[0][0].value, 1);\n  t.is(r.rows[0][1].value, 2);\n  t.is(r.rows[1][0].value, 3);\n  t.is(r.rows[1][1].value, 4);\n  t.is(r.rows[2][0].value, 5);\n  t.is(r.rows[2][1].value, 6);\n});\n\ntest('should have two pages for 7 buttons', t => {\n  const r = new PagedOptions(\n    2,\n    new OptionsResponse({\n      rows: generateButtons(7),\n    }));\n  t.is(r.totalPages, 2);\n  t.is(r.rows.length, 2);\n  t.is(r.rows[0][0].value, 6);\n  t.is(r.rows[0][1].value, 7);\n  t.is(r.rows[1][0].value, 'previous');\n  t.falsy(r.rows[1][1]);\n});\n\ntest('should have three pages for 12 buttons', t => {\n  const rsOptions = new OptionsResponse({\n    rows: generateButtons(12),\n  });\n  const page1 = new PagedOptions(1, rsOptions);\n  t.is(page1.totalPages, 3);\n  t.is(page1.currentPage, 1);\n  t.is(page1.rows.length, 3);\n  t.is(page1.rows[0][0].value, 1);\n  t.is(page1.rows[0][1].value, 2);\n  t.is(page1.rows[1][0].value, 3);\n  t.is(page1.rows[1][1].value, 4);\n  t.is(page1.rows[2][0].value, 5);\n  t.is(page1.rows[2][1].value, 'next');\n\n  const page2 = new PagedOptions(2, rsOptions);\n  t.is(page2.totalPages, 3);\n  t.is(page2.currentPage, 2);\n  t.is(page2.rows.length, 3);\n  t.is(page2.rows[0][0].value, 6);\n  t.is(page2.rows[0][1].value, 7);\n  t.is(page2.rows[1][0].value, 8);\n  t.is(page2.rows[1][1].value, 9);\n  t.is(page2.rows[2][0].value, 'previous');\n  t.is(page2.rows[2][1].value, 'next');\n\n  const page3 = new PagedOptions(3, rsOptions);\n  t.is(page3.totalPages, 3);\n  t.is(page3.currentPage, 3);\n  t.is(page3.rows.length, 2);\n  t.is(page3.rows[0][0].value, 10);\n  t.is(page3.rows[0][1].value, 11);\n  t.is(page3.rows[1][0].value, 'previous');\n  t.is(page3.rows[1][1].value, 12);\n});\n\ntest('shoduld return correct number of pages', t => {\n  const x = (n) => {\n    const r = new PagedOptions(\n      1,\n      new OptionsResponse({ rows: generateButtons(n) }),\n    );\n    return r.totalPages;\n  };\n  t.is(x(1), 1);\n  t.is(x(2), 1);\n  t.is(x(3), 1);\n  t.is(x(4), 1);\n  t.is(x(5), 1);\n  t.is(x(6), 1);\n  t.is(x(7), 2);\n  t.is(x(8), 2);\n  t.is(x(9), 2);\n  t.is(x(10), 2);\n  t.is(x(11), 3);\n  t.is(x(12), 3);\n  t.is(x(13), 3);\n  t.is(x(14), 3);\n  t.is(x(15), 4);\n});\n\ntest('should accept weird number of pages', t => {\n  const o = new OptionsResponse({ rows: generateButtons(10) });\n  t.is(new PagedOptions(undefined, o).currentPage, 1);\n  t.is(new PagedOptions(100, o).currentPage, 2);\n  t.is(new PagedOptions(0, o).currentPage, 1);\n  t.is(new PagedOptions(-1, o).currentPage, 1);\n  t.is(new PagedOptions(1.123, o).currentPage, 2);\n  t.is(new PagedOptions('0', o).currentPage, 1);\n  t.is(new PagedOptions(' 2 ', o).currentPage, 2);\n});\n\ntest('when decorated should keep other origin props', t => {\n  const o = new OptionsResponse({\n    rows: generateButtons(10),\n    message: 'foo',\n    defaultMessage: 'bar',\n  });\n  const r = new PagedOptions(1, o);\n  t.is(r.message, 'foo');\n  t.is(r.defaultMessage, 'bar');\n});\n\ntest('should return next or previous page', t => {\n  const r = new PagedOptions(\n    2,\n    new OptionsResponse({ rows: generateButtons(20) }),\n  );\n  t.is(r.nextPageNumber('next'), 3);\n  t.is(r.nextPageNumber('previous'), 1);\n});\n"]}