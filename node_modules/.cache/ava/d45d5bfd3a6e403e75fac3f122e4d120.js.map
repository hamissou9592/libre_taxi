{"version":3,"sources":["text-to-value-test.js"],"names":["Foo","options","type","rows","label","value","user","state","fromRoute","i18n","t","is"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;weAAA;;;;;;;;;;;;;;;;;;AAkBA;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEMA,G;;;AACJ,eAAYC,OAAZ,EAAqB;AAAA;AAAA,2HACb,sBAAc,EAAEC,MAAM,KAAR,EAAd,EAA+BD,OAA/B,CADa;AAEpB;;;;0BAEK;AACJ,aAAO,8BAAoB,EAAEE,MAAM,CACjC,CAAC,EAAEC,OAAO,IAAT,EAAeC,OAAO,MAAtB,EAAD,EAAiC,EAAED,OAAO,QAAT,EAAmBC,OAAO,UAA1B,EAAjC,CADiC,CAAR,EAApB,CAAP;AAGD;;;2BAEM;AACL,aAAO,8BAAoB,EAAEF,MAAM,CACjC,CAAC,EAAEC,OAAO,KAAT,EAAgBC,OAAO,OAAvB,EAAD,EAAmC,EAAED,OAAO,SAAT,EAAoBC,OAAO,WAA3B,EAAnC,CADiC,CAAR,EAApB,CAAP;AAGD;;;;;AAGH,IAAMC,OAAO,EAAEC,OAAO,EAAT,EAAb;;AAEA,mBAAK,6CAAL,EAAoD,aAAK;AAAA;AAAA;AAAA;AAAA;AAAA;;AACvD,0BAAcC,SAAd,GAA0B;AAAA,WAAM,IAAIR,GAAJ,CAAQ,EAAES,MAAM,EAAR,EAAYH,UAAZ,EAAR,CAAN;AAAA,GAA1B;AACAI,IAAEC,EAAF,uBAAK,sCAAYL,IAAZ,8BAAkB,IAAlB,CAAL;AAAA;AAAA;AAAA;AAAA,MAA8B,MAA9B;AACAI,IAAEC,EAAF,yBAAK,uCAAYL,IAAZ,8BAAkB,QAAlB,CAAL;AAAA;AAAA;AAAA;AAAA,MAAkC,UAAlC;AACAI,IAAEC,EAAF,yBAAK,uCAAYL,IAAZ,8BAAkB,KAAlB,CAAL;AAAA;AAAA;AAAA;AAAA,MAA+B,KAA/B,EAJuD,CAIhB;AACvCI,IAAEC,EAAF,yBAAK,uCAAYL,IAAZ,8BAAkB,SAAlB,CAAL;AAAA;AAAA;AAAA;AAAA,MAAmC,SAAnC,EALuD,CAKR;AAC/CI,IAAEC,EAAF,yBAAK,uCAAYL,IAAZ,8BAAkB,KAAlB,CAAL;AAAA;AAAA;AAAA;AAAA,MAA+B,KAA/B;AACD,CAPD","file":"text-to-value-test.js","sourcesContent":["/*\n    LibreTaxi, free and open source ride sharing platform.\n    Copyright (C) 2016-2017  Roman Pushkin\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Affero General Public License as\n    published by the Free Software Foundation, either version 3 of the\n    License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Affero General Public License for more details.\n\n    You should have received a copy of the GNU Affero General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\n/* eslint-disable no-new */\nimport test from 'ava';\nimport textToValue from '../../src/support/text-to-value';\nimport ActionFactory from '../../src/factories/action-factory';\nimport Action from '../../src/action';\nimport OptionsResponse from '../../src/responses/options-response';\n\nclass Foo extends Action {\n  constructor(options) {\n    super(Object.assign({ type: 'foo' }, options));\n  }\n\n  get() {\n    return new OptionsResponse({ rows: [\n      [{ label: 'OK', value: '_ok_' }, { label: 'Cancel', value: '_cancel_' }],\n    ] });\n  }\n\n  post() {\n    return new OptionsResponse({ rows: [\n      [{ label: 'OK2', value: '_ok2_' }, { label: 'Cancel2', value: '_cancel2_' }],\n    ] });\n  }\n}\n\nconst user = { state: {} };\n\ntest('should convert text to value for the action', t => {\n  ActionFactory.fromRoute = () => new Foo({ i18n: {}, user });\n  t.is(textToValue(user, 'OK'), '_ok_');\n  t.is(textToValue(user, 'Cancel'), '_cancel_');\n  t.is(textToValue(user, 'OK2'), 'OK2'); // should ignore post method\n  t.is(textToValue(user, 'Cancel2'), 'Cancel2'); // should ignore post method\n  t.is(textToValue(user, 'foo'), 'foo');\n});\n"]}